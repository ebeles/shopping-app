<!DOCTYPE html>
<html lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeLeaf/Layout"
      xmlns:th="http://www.thymeLeaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.thymeLeaf.org ">
<head>
    <!-- JavaScript Bundle with Popper -->
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="css/bootstrap.css" rel="stylesheet">
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>-->
</head>
<body>
<!--<h1> [[${name}]]</h1>-->
<!--<h1 th:text="${product.name}"></h1>-->
<!--<h1 th:text="${product.price}"></h1>-->
<div class="container">
    <div class="col-12">
<!--        <nav class="navbar navbar-expand-sm navbar-light" style="background-color: #e3f2fd;">-->
<!--            &lt;!&ndash;Navbar content &ndash;&gt;-->
<!--            <ul class="navbar-nav">-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link font-weight-bold" href="/addProduct.html">Add product</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link font-weight-bold" href="/listProducts.html">List of products</a>-->
<!--                </li>-->
<!--            </ul>-->
<!--        </nav>-->
        <hr>
        <h3 class="text-center">List of products</h3>
        <hr>


        <table class="table">
            <thead class="table-dark">
            <tr>
                <th scope="col">image</th>
                <th scope="col">name</th>
                <th scope="col">brand</th>
                <th scope="col">description</th>
                <th scope="col">price</th>
                <th scope="col">delete product</th>
            </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${products}">
<!--                   <th scope="row">[[*{product.id}]]</th>-->
                    <th scope="row"><img alt="" th:src="*{'data:image/jpeg;base64, ' + {product.image}}" style="width: 100px;height: 100px;"> </th>
                    <td>[[*{product.name}]]
                        <br>
                        <!--Button trigger modal -->
                        <button type="button" class="btn btn-success btn-sm mt-2" data-toggle="modal"
                                th:attr="data-target='#exampleModalCenter' + *{product.id}">
                           Update name
                        </button>
                        <!-- Vertically centered modal -->
                      <div class="modal fade" th:id="*{'exampleModalCenter' + {product.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalCenterTitle">Change then name of the product</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <!--Here we add the form -->
                                <form action="/changeName" method="post">
                                    <div class="form-group">
                                        <label>product id</label>
                                        <input type="text" th:value="*{product.id}"
                                        class="form-control" name="id" readonly>
                                        <label>New product name</label>
                                        <input type="text" name="newPname" class="form-control">
                                        <br>
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                            </div>
                        </div>
                      </div>
                      </div>


                    </td>

                    <td>[[*{product.brand}]]
                        <br>
                        <!--Button trigger modal -->
                        <button type="button" class="btn btn-success btn-sm mt-2" data-toggle="modal"
                                th:attr="data-target='#exampleModalCenter' + *{product.id}">
                            Update name
                        </button>
                        <!-- Vertically centered modal -->
                        <div class="modal fade" th:id="*{'exampleModalCenter' + {product.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalCenterTitle">Change then name of the brand</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <!--Here we add the form -->
                                        <form action="/changeBrand" method="post">
                                            <div class="form-group">
                                                <label>product id</label>
                                                <input type="text" th:value="*{product.id}"
                                                       class="form-control" name="id" readonly>
                                                <label>New brand of the product</label>
                                                <input type="text" name="newBrand" class="form-control">
                                                <br>
                                                <button type="submit" class="btn btn-primary">Submit</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                                    </div>
                                </div>
                            </div>
                        </div>


                    </td>
                    <td>[[*{product.description}]]
                        <br>
                        <!--Button trigger modal -->
                        <button type="button" class="btn btn-success btn-sm mt-2" data-toggle="modal"
                                th:attr="data-target='#exampleModalCenter' + *{product.id}">
                            Update description
                        </button>
                        <!-- Vertically centered modal -->
                        <div class="modal fade" th:id="*{'exampleModalCenter' + {product.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalCenterTitle">Change the description</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="/changeDescription" method="post">
                                            <div class="form-group">
                                                <label>product id</label>
                                                <input type="text" th:value="*{product.id}"
                                                       class="form-control" name="id" readonly >
                                                <label>New description</label>
                                                <input type="text" name="newDescription" class="form-control">
                                                <br>
                                                <button type="submit" class="btn btn-primary">Submit</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>[[*{product.price}]]
                        <br>
                        <!--Button trigger modal -->
                        <button type="button" class="btn btn-success btn-sm mt-2" data-toggle="modal"
                                th:attr="data-target='#exampleModalCenter' + *{product.id}">
                            Update price
                        </button>
                        <!-- Vertically centered modal -->
                        <div class="modal fade" th:id="*{'exampleModalCenter' + {product.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalCenterTitle">Change the price</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="/changePrice" method="post">
                                            <div class="form-group">
                                                <label>product id</label>
                                                <input type="text" th:value="*{product.id}"
                                                       class="form-control" name="id"  readonly >
                                                <label>New product price</label>
                                                <input type="number" name="newPrice" class="form-control">
                                                <br>
                                                <button type="submit" class="btn btn-primary">Submit</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td><a th:href="@{/deleteProd/{id}(id= ${product.id})}"
                   class="btn btn-danger">Delete</a></td>
 <!--with this syntax we will delete a product from database( additionally we make it in the controller)-->

                </tr>
            </tbody>
        </table>
    </div>
</div>

<!--<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>-->
<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/bootstrap.js"></script>
</body>
</html>